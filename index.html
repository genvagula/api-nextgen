
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Ampron LED Displays Communication Protocol API</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;json&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="json">JSON</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#ampronled-nextgen-software" class="toc-h2 toc-link" data-title="ampronled-nextgen-software">AmpronLED NextGen software</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#communication-protocol" class="toc-h1 toc-link" data-title="communication-protocol">Communication Protocol</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#general-view" class="toc-h2 toc-link" data-title="general-view">General View</a>
                  </li>
                  <li>
                    <a href="#method-syntax-and-semantics" class="toc-h2 toc-link" data-title="method-syntax-and-semantics">Method, Syntax and Semantics</a>
                  </li>
                  <li>
                    <a href="#variables-and-requests" class="toc-h2 toc-link" data-title="variables-and-requests">Variables and Requests</a>
                  </li>
                  <li>
                    <a href="#areadata" class="toc-h2 toc-link" data-title="areadata">AreaData</a>
                  </li>
                  <li>
                    <a href="#status-responses" class="toc-h2 toc-link" data-title="status-responses">Status Responses</a>
                  </li>
                  <li>
                    <a href="#addressing" class="toc-h2 toc-link" data-title="addressing">Addressing</a>
                  </li>
                  <li>
                    <a href="#encoding-of-url-query-parameters" class="toc-h2 toc-link" data-title="encoding-of-url-query-parameters">Encoding of URL Query Parameters</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#configuration" class="toc-h1 toc-link" data-title="configuration">Configuration</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#main" class="toc-h2 toc-link" data-title="main">Main</a>
                  </li>
                  <li>
                    <a href="#uploading-configuration" class="toc-h2 toc-link" data-title="uploading-configuration">Uploading configuration</a>
                  </li>
                  <li>
                    <a href="#activation-of-new-configuration" class="toc-h2 toc-link" data-title="activation-of-new-configuration">Activation of new configuration</a>
                  </li>
                  <li>
                    <a href="#managing-brightness-manually" class="toc-h2 toc-link" data-title="managing-brightness-manually">Managing brightness manually</a>
                  </li>
                  <li>
                    <a href="#changing-network-configuration" class="toc-h2 toc-link" data-title="changing-network-configuration">Changing Network configuration</a>
                  </li>
                  <li>
                    <a href="#configurable-items" class="toc-h2 toc-link" data-title="configurable-items">Configurable Items</a>
                  </li>
                  <li>
                    <a href="#listening-port" class="toc-h2 toc-link" data-title="listening-port">Listening Port</a>
                  </li>
                  <li>
                    <a href="#displays-group" class="toc-h2 toc-link" data-title="displays-group">Displays Group</a>
                  </li>
                  <li>
                    <a href="#display-id" class="toc-h2 toc-link" data-title="display-id">Display ID</a>
                  </li>
                  <li>
                    <a href="#display-ip-and-port" class="toc-h2 toc-link" data-title="display-ip-and-port">Display IP and Port</a>
                  </li>
                  <li>
                    <a href="#display-metaname" class="toc-h2 toc-link" data-title="display-metaname">Display Metaname</a>
                  </li>
                  <li>
                    <a href="#display-controller-type" class="toc-h2 toc-link" data-title="display-controller-type">Display Controller Type</a>
                  </li>
                  <li>
                    <a href="#show-ip-on-boot" class="toc-h2 toc-link" data-title="show-ip-on-boot">Show IP on boot</a>
                  </li>
                  <li>
                    <a href="#display-size" class="toc-h2 toc-link" data-title="display-size">Display Size</a>
                  </li>
                  <li>
                    <a href="#display-layout-management" class="toc-h2 toc-link" data-title="display-layout-management">Display Layout Management</a>
                  </li>
                  <li>
                    <a href="#area-coordinates" class="toc-h2 toc-link" data-title="area-coordinates">Area Coordinates</a>
                  </li>
                  <li>
                    <a href="#area-types" class="toc-h2 toc-link" data-title="area-types">Area Types</a>
                  </li>
                  <li>
                    <a href="#monitoring-and-bite" class="toc-h2 toc-link" data-title="monitoring-and-bite">Monitoring and BITE</a>
                  </li>
                  <li>
                    <a href="#logging" class="toc-h2 toc-link" data-title="logging">Logging</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="errors">Errors</a>
          </li>
          <li>
            <a href="#how-to-features" class="toc-h1 toc-link" data-title="how-to-features">How To (Features)</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#brightness-control" class="toc-h2 toc-link" data-title="brightness-control">Brightness control</a>
                  </li>
                  <li>
                    <a href="#configuration" class="toc-h2 toc-link" data-title="configuration">Configuration</a>
                  </li>
                  <li>
                    <a href="#define-text-colour" class="toc-h2 toc-link" data-title="define-text-colour">Define text colour</a>
                  </li>
                  <li>
                    <a href="#set-and-change-scroll-speed" class="toc-h2 toc-link" data-title="set-and-change-scroll-speed">Set and change scroll-speed</a>
                  </li>
                  <li>
                    <a href="#set-text-background-colour" class="toc-h2 toc-link" data-title="set-text-background-colour">Set text background colour</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://ampron.eu/article/direction-and-amount-of-free-parking-spaces-led-signs/' target="_blank">See sample use case</a></li>
            <li><a href="mailto:team@ampron.eu?subject=Question about API">Send Us Questions</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>The purpose is to describe the configuration of Ampron LED display communication protocol. </p>
<h2 id='ampronled-nextgen-software'>AmpronLED NextGen software</h2>
<p>AmpronLED NextGen software is designed to drive and monitor the status of Ampron LED displays. Our LED display hardware and AmpronLED software together combine the solution that we define as Smart LED Display System.</p>

<p>Current API defines the ways of configuring and communicating with the software. The general approach, method, syntax and semantics are described in the following chapters.</p>

<p>The communication protocol is defined to a level of technical detail which should assure a clear understanding of how to drive, monitor and manage the software and displays.</p>

<p>Following is structured in a way that at the left side you will see descriptions and at the right side are the example values.</p>
<h1 id='communication-protocol'>Communication Protocol</h1>
<p>This chapter is intended to describe the communication concept and protocol between Third Party Communication Module (TPCM) and AmpronLED NextGen software for the operational environment. The communication protocol is closely related to the configuration of AmpronLED NextGen software.</p>

<p>Main Communication Process:</p>

<p><strong>PHASE1</strong>
-    Third-Party Communication Module (TPCM) sends a control message to AmpronLED NextGen</p>

<p><strong>PHASE2</strong>
-    AmpronLED NextGen visualises data on the Smart LED Display System (SLDS)</p>

<p><strong>PHASE3</strong>
-    AmpronLED NextGen makes feedback messages available for parsing</p>
<h2 id='general-view'>General View</h2>
<p>The complete system is composed of the following components:</p>

<ul>
<li>Third Party Communication Module</li>
<li>AmpronLED NextGen Software running inside of SLDS Display Units</li>
<li>Communication Network</li>
</ul>

<p><strong>Third-party communication module</strong> is responsible for sending control messages and polling status messages.</p>

<p><strong>AmpronLED NextGen Software</strong> is responsible for receiving the control messages from TPCM, creating status messages for TPCM and visualising content on SLDS Unit(s).</p>

<p><em>Note: as for generalization purposes, only Ampron standard software with its communication format, syntax and semantics are described.</em></p>

<p><strong>SLDS Display Units</strong> are the visualization units (LED, LCD/TFT or VMS displays) which provide the visual results of communication between Third Party communication module and AmpronLED NextGen software.</p>

<p><strong>Communication Network</strong> is considered to include all equipment and measures between TPCM and SLDS Display Units.</p>

<p><img src="images/images/Ampron_LED_Communication_Overview_NextGen.png" alt="Ampron LED Communication Overview" /> </p>
<h2 id='method-syntax-and-semantics'>Method, Syntax and Semantics</h2><h3 id='method'>Method</h3>
<p>Messaging between TPCM and AmpronLED NEXTGEN is performed by using <strong>HTTP GET</strong> method.</p>
<h3 id='syntax'>Syntax</h3>
<p>Control message format between TPCM and AmpronLED NextGen is HTTP Request:</p>

<p><code>GET http://ipaddress:port/mlds?nameX=valueX&amp;nameY=valueY&amp;nameZ=valueZ</code></p>

<table><thead>
<tr>
<th>Message element</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>http://</code></td>
<td>hypertext transfer protocol identifier, constant string</td>
</tr>
<tr>
<td><code>ipaddress</code></td>
<td>IP address of the SLDS running AmpronLED NextGen software</td>
</tr>
<tr>
<td><code>:port</code></td>
<td>communication port which is listened by AmpronLED NextGen, integer 1025…65535</td>
</tr>
<tr>
<td><code>/mlds?</code></td>
<td>resource request, a constant string</td>
</tr>
<tr>
<td><code>nameX=valueX</code></td>
<td>message pairs/AreaData, predefined alphanumeric pairs</td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td>separator, constant character</td>
</tr>
</tbody></table>
<h3 id='semantics'>Semantics</h3>
<p><code>nameX = valueX</code> - nameX is variable identifier and valueX is value of variable</p>

<p>There are five types of variables:</p>

<ul>
<li>Layouts</li>
<li>AreaData</li>
<li>Status responses </li>
<li>Addressing</li>
<li>Numbering</li>
</ul>

<p>Please see the next chapter for details</p>
<h2 id='variables-and-requests'>Variables and Requests</h2><h3 id='layouts'>Layouts</h3>
<p>Layouts are configurable views of LED displays. There can be multiple layouts for every single display. However, from the communications point of view, only one layout can be defined in a single GET request.</p>

<p>Layouts are defined in config.json file, inside the block named “layout”.</p>

<p><code>GET http://ipaddress:port/mlds?id=GATE_2&amp;layout=vehiclenumber&amp;nameZ=valueZ&amp;inumber=XXXXX</code></p>
<h2 id='areadata'>AreaData</h2>
<p>AreaDatas are configurable sections (Areas) in every Layout. There can be multiple Areas in one Layout. From the communications point of view, if there are nameX=valueX pairs in the GET request, which are not described in the configuration file, then they will be disregarded as faulty.
If there are no pairs or fewer pairs than defined in Area configuration, the request will be handled as a request for a blank screen or blank area respectively. There are 6 types of AreaData (static text, live text, images, date&amp;time, video and images):</p>

<p><code>GET http://ipaddress:port/mlds?id=GATE_2&amp;layout=vehiclenumber&amp;kiosk=21&amp;plate=123ABC&amp;inumber=XXXXX</code></p>
<h2 id='status-responses'>Status Responses</h2><h3 id='command-status'>Command Status</h3>
<p>AmpronLED NextGen software confirms synchronously with OK if the HTTP GET request is received and does not contain forbidden elements.
AmpronLED NextGen software confirms the last control message status by visualising it at:</p>

<p><code>http://ipaddress:port/info</code></p>
<h3 id='configuration-status'>Configuration Status</h3>
<p>AmpronLED NextGen software confirms the last configuration check result by visualising it at:</p>

<p><code>http://ipaddress:port/info</code></p>
<h3 id='network-configuration'>Network configuration</h3>
<p>AmpronLED NextGen software current network configuration is visible at:</p>

<p><code>http://ipaddress:port/getethernetconfig</code></p>
<h2 id='addressing'>Addressing</h2>
<p>There can be 1 SLDS unit operated by one AmpronLED NextGen instance, however multiple id-s can be present in config.json:</p>

<p>MLDS unit identifier -&gt; variable nameX is “id”, value is string max 255 chars</p>

<p><code>GET http://ipaddress:port/mlds?id=GATE_2&amp;layout=vehiclenumber&amp;kiosk=21&amp;plate=123ABC&amp;inumber=XXXXX</code></p>
<h2 id='encoding-of-url-query-parameters'>Encoding of URL Query Parameters</h2>
<p>Characters from the unreserved set are represented as-is without translation, other characters are converted to bytes according to UTF-8, and then percent-encoded.
See <a href='https://en.wikipedia.org/wiki/Percent-encoding' target="_blank">Wikipedia Percent Encoding</a></p>
<h1 id='configuration'>Configuration</h1><h2 id='main'>Main</h2>
<p>The main configuration is set in a <code>config.json</code> file. Other configuration items are defined in various files and are linked to the main file according to specific needs using referencing.</p>
<h2 id='uploading-configuration'>Uploading configuration</h2>
<p>After changes to configuration, configuration files must: (a) be uploaded to SLDS via SFTP or (b)zipped and made available to be reached at desired URL. To download configuration files to SLDS, relevant HTTP GET command must be given:</p>

<p>`http://ipaddress:port/load_config?url=http://URL/conf.zip</p>
<h2 id='activation-of-new-configuration'>Activation of new configuration</h2>
<p>Configuration is checked every 3000 seconds and activated automatically, to force check use HTTP GET command:</p>

<p><code>http://ipaddress:port/reload_config</code></p>

<p>After configuration change, check the status at:</p>

<p><code>http://ipaddress:port/info</code></p>

<p>If errors are detected in configuration files, they are disregarded and relevant information is shown on the above link.</p>
<h2 id='managing-brightness-manually'>Managing brightness manually</h2>
<p>LED Screen brightness can be managed manually by sending HTTP GET request with desired value 0...100:</p>

<p><code>http://ampronledIP:port/brightness/VALUE</code></p>

<p>NOTE! To disable internal brightness scheduler to avoid it from overriding the manual value define in config.json:</p>

<p>&quot;sensorBrightness&quot;: true,</p>
<h2 id='changing-network-configuration'>Changing Network configuration</h2>
<p>To change network configuration and enable/disable DHCP use commands (NB! remember, this should be used only if one id is defined in config.json):</p>

<p><code>http://OLDipaddress:port/setethernetconfig?dhcp=true&amp;ip=NEWipaddress&amp;netmask=NEWnetmaskip&amp;gateway=NEWgatewayip&amp;dns=NEWdnsip</code> </p>

<p>to check status:</p>

<p><code>http://NEWipaddress:port/getethernetconfig</code></p>
<h2 id='configurable-items'>Configurable Items</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"port"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9199"</span><span class="p">,</span><span class="w">

    </span><span class="s2">"displays"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"GATE_OUT2"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

        </span><span class="s2">"displayName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"anyname"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"displayIp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"192.168.100.100"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"displayPort"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9551"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"controllerType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T430"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"infoScreenTtl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15"</span><span class="w">


            </span><span class="s2">"displayHeight"</span><span class="p">:</span><span class="w"> </span><span class="s2">"160"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"displayWidth"</span><span class="p">:</span><span class="w"> </span><span class="s2">"96"</span><span class="p">,</span><span class="w">

            </span><span class="s2">"layout"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"vehicle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"numberplate"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0 0 95 29"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"textFromStart"</span><span class="p">:</span><span class="s2">"true"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"textLiveUpdate"</span><span class="p">:</span><span class="s2">"false"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"headToTail"</span><span class="p">:</span><span class="s2">"5"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"scrollSpeed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"font"</span><span class="p">:</span><span class="w"> </span><span class="s2">"font1.ttf"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"align"</span><span class="p">:</span><span class="w"> </span><span class="s2">"center"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"fontSize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"fontColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"255 255 255"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"infotext"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0 30 95 69"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"static"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"align"</span><span class="p">:</span><span class="w"> </span><span class="s2">"center"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"font"</span><span class="p">:</span><span class="w"> </span><span class="s2">"font2.ttf"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"fontSize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"fontColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"255 255 255"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"21"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some static text"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"arrow"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0 70 95 100"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"ttl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"300"</span><span class="w">
                        </span><span class="s2">"defaultValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is default text"</span><span class="w">
                        </span><span class="s2">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"S"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fwd.png"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"RE"</span><span class="p">:</span><span class="w"> </span><span class="s2">"left.png"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"commercial"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0 101 95 120"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"video"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"VID1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"video1.mp4"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"VID2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"video2.mp4"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"clock"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0 121 95 140"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"date"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"dateFormat"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yyyy-MM-dd"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"dateOffset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+3"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"all"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0 0 95 100"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="s2">"WAIT"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pleasewait.png"</span><span class="p">,</span><span class="w">
                            </span><span class="s2">"CLOSED"</span><span class="p">:</span><span class="w"> </span><span class="s2">"closed.png"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<ul>
<li>Server listening port</li>
<li>Display group name</li>
<li>Display ID</li>
<li>Display IP and port</li>
<li>Display meta name</li>
<li>Display controller type</li>
<li>Display height</li>
<li>Display width</li>
<li>Display layout</li>
<li>Display areas</li>
<li>Content-type</li>
<li>Text-based content alignment</li>
<li>Text-based content font size</li>
<li>Text-based content font colour</li>
<li>Picture based content parameters</li>
<li>Video based content parameters</li>
<li>Date based content parameters</li>
</ul>
<h2 id='listening-port'>Listening Port</h2><pre class="highlight json tab-json"><code><span class="w">
</span><span class="s2">"port"</span><span class="p">:</span><span class="w">  </span><span class="s2">"9090"</span><span class="p">,</span><span class="w">

</span></code></pre>
<p>Define the following value in <code>config.json</code> file:</p>

<p><code>port</code>        -&gt; Numerical value within the range of from 1025 up to 65535</p>
<h2 id='displays-group'>Displays Group</h2><pre class="highlight json tab-json"><code><span class="s2">"displays"</span><span class="p">:</span><span class="w">
</span></code></pre>
<p><code>displays</code> Displays subgroup. Fixed value.</p>
<h2 id='display-id'>Display ID</h2><pre class="highlight json tab-json"><code><span class="s2">"DISPLAYID"</span><span class="w">
</span></code></pre>
<p>The first thing to do for adding new display is defining following value in <code>config.json</code> file:</p>

<p><code>Display ID</code> - String type unique value, up to 255 characters</p>

<p>Replace default DISPLAYID with your own unique display ID name.</p>
<h2 id='display-ip-and-port'>Display IP and Port</h2><pre class="highlight json tab-json"><code><span class="w">
</span><span class="s2">"displayIp"</span><span class="p">:</span><span class="w">    </span><span class="s2">"192.168.200.200"</span><span class="p">,</span><span class="w">
</span><span class="s2">"displayPort"</span><span class="p">:</span><span class="w">  </span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
</span></code></pre>
<p>Set the following value in <code>config.json</code> file:</p>

<p><code>“displayIP“</code>          -&gt; In the form of standard IPv4 address
<code>“displayPort“</code>         -&gt; Numerical value according to the specification</p>
<h2 id='display-metaname'>Display Metaname</h2><pre class="highlight json tab-json"><code><span class="w">
</span><span class="s2">"displayName"</span><span class="p">:</span><span class="w">  </span><span class="s2">"anyname"</span><span class="p">,</span><span class="w">
</span></code></pre>
<p>Define the following value in <code>config.json</code> file:</p>

<p><code>displayName</code>        -&gt; String type value, up to 255 characters</p>
<h2 id='display-controller-type'>Display Controller Type</h2><pre class="highlight json tab-json"><code><span class="s2">"controllerType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"G20"</span><span class="p">,</span><span class="w">
</span></code></pre>
<p>Define the following value in <code>config.json</code> file:</p>

<p><code>controllerType</code>          -&gt; controller model</p>
<h2 id='show-ip-on-boot'>Show IP on boot</h2><pre class="highlight json tab-json"><code><span class="s2">"infoScreenTtl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15"</span><span class="w">
</span></code></pre>
<p>Define the following value in <code>config.json</code> file:</p>

<p><code>infoScreenTtl</code>          -&gt; define value in seconds</p>
<h2 id='display-size'>Display Size</h2><pre class="highlight json tab-json"><code><span class="s2">"displayHeight"</span><span class="p">:</span><span class="w">    </span><span class="s2">"160"</span><span class="p">,</span><span class="w">
</span><span class="s2">"displayWidth"</span><span class="p">:</span><span class="w">     </span><span class="s2">"96"</span><span class="p">,</span><span class="w">
</span></code></pre>
<p>Define the following values in <code>config.json</code> file:</p>

<p><code>displayHeight</code>     -&gt; Display height in pixels</p>

<p><code>displayWidth</code>          -&gt; Display width in pixels</p>
<h2 id='display-layout-management'>Display Layout Management</h2><pre class="highlight json tab-json"><code><span class="w">    </span><span class="s2">"layout"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"layoutName"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"areaID"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

                            </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">      

</span></code></pre>
<p>Define the following value in <code>config.json</code> file:</p>

<p><code>layoutName</code>    -&gt; String type value, up to 255 characters</p>

<p><code>areaID</code>        -&gt; String type of unique value, up to 255 characters</p>

<p>Consider the values that make sense in your overall system configuration.</p>
<h2 id='area-coordinates'>Area Coordinates</h2><pre class="highlight json tab-json"><code><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0 0 100 100"</span><span class="p">,</span><span class="w">
</span></code></pre>
<p>Define the following values in <code>config.json</code> file:</p>

<p><code>coordinates</code>    -&gt; Area coordinates in pixels (x y X Y)</p>

<aside class="warning">
Must physically fit into display area and no overlap with other areas.
</aside>

<p><em>x,y - square area upper left corner.</em></p>

<p><em>X,Y - square area lower right corner.</em></p>
<h2 id='area-types'>Area Types</h2><pre class="highlight json tab-json"><code><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"static"</span><span class="p">,</span><span class="w">
</span></code></pre>
<p>Define the following values in <code>config.json</code> file:</p>

<p><code>type</code>           -&gt; Possible values - <code>static</code>, <code>text</code>, <code>video</code>, <code>date</code> or <code>image</code></p>
<h3 id='static-text-variables'>Static Text Variables</h3><pre class="highlight json tab-json"><code><span class="s2">"align"</span><span class="p">:</span><span class="w"> </span><span class="s2">"center"</span><span class="p">,</span><span class="w">
           </span><span class="s2">"fontSize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24"</span><span class="p">,</span><span class="w">
           </span><span class="s2">"fontColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"255 255 255"</span><span class="p">,</span><span class="w">
           </span><span class="s2">"ttl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"300"</span><span class="p">,</span><span class="w">
           </span><span class="s2">"defaultValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is default text"</span><span class="p">,</span><span class="w">
           </span><span class="s2">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"TEXTID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="w">
                     </span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If the chosen area type was chosen <code>static</code> then define section <code>texts</code> and add following variables:</p>

<p><code>align</code> -&gt; text alginment. Possible values <code>center</code> or <code>left</code>
<code>fontSize</code> -&gt; font size in pixels, must be smaller than area height
<code>fontColor</code> -&gt; font color in RGB
<code>ttl</code> -&gt; time in seconds after which content is erased or replaced by &quot;defaultValue&quot; 
<code>defaultValue</code> -&gt; after expiration of ttl, the area content can be define as default text or image (picture1.png)
<code>params</code> -&gt; parameters subgroup. Fixed value
<code>TEXTID</code> -&gt; String type value, up to 255 characters
<code>text</code> -&gt; Text to be displayed, up to 255 characters</p>

<p>For &quot;text&quot; and &quot;static&quot; areas it is possible to define font color also with the GET request: </p>

<p>http://ampronledIP:port/mlds?id=DISPLAY_ID&amp;layout=LAYOUT_NAME&amp;AREA_NAME=HELLO&amp;fontColor[AREA_NAME]=0_255_255 , where 0_255_255 is the color of text in RGB</p>

<p>It is possible to define background color of &quot;text&quot; and &quot;static&quot; areas text. To set the background color of text, define following parameter under the relevant area:</p>

<p>&quot;backgroundColor&quot;: &quot;0 255 255&quot;,    whereas &quot;0 255 255&quot; is the color of text background in RGB</p>

<p>it is also possible to define alpha channel for this feature, </p>

<p>&quot;backgroundColor&quot;: &quot;0 255 255 127&quot;,  whereas 127 is alpha channel value 0...127</p>
<h3 id='freetext-parameters'>Freetext Parameters</h3><pre class="highlight json tab-json"><code><span class="s2">"align"</span><span class="p">:</span><span class="w"> </span><span class="s2">"center"</span><span class="p">,</span><span class="w">
</span><span class="s2">"fontSize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24"</span><span class="p">,</span><span class="w">
</span><span class="s2">"fontColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"255 255 255"</span><span class="w">
</span><span class="s2">"textFromStart"</span><span class="p">:</span><span class="s2">"true"</span><span class="p">,</span><span class="w">
</span><span class="s2">"textLiveUpdate"</span><span class="p">:</span><span class="s2">"false"</span><span class="p">,</span><span class="w">
</span><span class="s2">"headToTail"</span><span class="p">:</span><span class="s2">"5"</span><span class="p">,</span><span class="w">
</span><span class="s2">"scrollSpeed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
</span><span class="s2">"font"</span><span class="p">:</span><span class="w"> </span><span class="s2">"font1.ttf"</span><span class="p">,</span><span class="w">

</span></code></pre>
<p>If the chosen area type was chosen <code>text</code> then define following variables:</p>

<p><code>align</code>     -&gt; text alginment. Possible values <code>center</code>, <code>right</code> or <code>left</code>. Valid only when text fits into area.
<code>fontSize</code>  -&gt; font size in pixels, must be smaller than area height
<code>fontColor</code> -&gt; font color in RGB
<code>textFromStart</code> -&gt; start scrolling text from beginning on update
<code>textLiveUpdate</code> -&gt; update text on the fly
<code>headToTail</code> -&gt; add spaces between scrolling text end and start
<code>scrollSpeed</code> -&gt; manage scrolling speed, values 0 to 8, default 4
<code>font</code> -&gt; assign specific font to the area, relevant .ttf file must be located in <code>fonts/filename</code>, relative to <code>ampronled</code></p>

<p>For &quot;text&quot; and &quot;static&quot; areas it is possible to define font color also with the GET request: </p>

<p>http://ampronledIP:port/mlds?id=DISPLAY_ID&amp;layout=LAYOUT_NAME&amp;AREA_NAME=HELLO&amp;fontColor[AREA_NAME]=0_255_255 , where 0_255_255 is the color of text in RGB</p>

<p>It is possible to define background color of &quot;text&quot; and &quot;static&quot; areas text. To set the background color of text, define following parameter under the relevant area:</p>

<p>&quot;backgroundColor&quot;: &quot;0 255 255&quot;,    whereas &quot;0 255 255&quot; is the color of text background in RGB</p>

<p>it is also possible to define alpha channel for this feature, </p>

<p>&quot;backgroundColor&quot;: &quot;0 255 255 127&quot;,  whereas 127 is alpha channel value 0...127</p>
<h3 id='picture-parameters'>Picture Parameters</h3><pre class="highlight json tab-json"><code><span class="s2">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"PICTUREID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filename1.gif"</span><span class="p">,</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Add following values:</p>

<p><code>PICTUREID</code>    -&gt; String type unique value, up to 255 characters
<code>filename.gif</code>    -&gt; String type value, up to 255 characters filename with the filename extension.</p>

<p>All files must be located in the catalogue <code>images/filename</code>, relative to <code>ampronled</code></p>
<h3 id='video-parameters'>Video Parameters</h3><pre class="highlight json tab-json"><code><span class="s2">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"VIDEOID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filename1.mp4"</span><span class="p">,</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If the chosen area type was chosen <code>video</code> then define following variables:</p>

<p><code>VIDEOID</code>    -&gt; String type unique value, up to 255 characters
<code>filename1.mp4</code>    -&gt; String type value, up to 255 characters filename with the filename extension.</p>

<p>All files must be located in the catalogue <code>images/filename</code>, relative to <code>ampronled</code></p>
<h3 id='date-and-time-parameters'>Date and Time Parameters</h3><pre class="highlight json tab-json"><code><span class="w">
</span><span class="s2">"fontSize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24"</span><span class="p">,</span><span class="w">
</span><span class="s2">"fontColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"255 255 255"</span><span class="p">,</span><span class="w">
</span><span class="s2">"font"</span><span class="p">:</span><span class="w"> </span><span class="s2">"font1.ttf"</span><span class="p">,</span><span class="w">
</span><span class="s2">"dateOffset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+3"</span><span class="w">
</span><span class="s2">"dateFormat"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yyyy-MM-dd"</span><span class="p">,</span><span class="w">


</span></code></pre>
<p>If the chosen area type was chosen <code>date</code> then define following variables:</p>

<p><code>fontSize</code>  -&gt; font size in pixels, must be smaller than area height
<code>fontColor</code> -&gt; font color in RGB
<code>font</code> -&gt; assign specific font to the area, relevant .ttf file must be located in <code>fonts/filename</code>, relative to <code>ampronled</code>
<code>dateOffset</code> -&gt; offset in hours from GMT+0</p>

<p><code>dateFormat</code> -&gt; see time formatting options:</p>

<p>Symbol   Meaning                Presentation       Example
                ------   -------                ------------       -------
                G        era designator         (Text)             AD
                y        year                   (Number)           1996
                M        month in year          (Text &amp; Number)    July &amp; 07
                L        standalone month       (Text &amp; Number)    July &amp; 07
                d        day in month           (Number)           10
                c        standalone day         (Number)           10
                h        hour in am/pm (1~12)   (Number)           12
                H        hour in day (0~23)     (Number)           0
                m        minute in hour         (Number)           30
                s        second in minute       (Number)           55
                S        fractional second      (Number)           978
                E        day of week            (Text)             Tuesday
                D        day in year            (Number)           189
                a        am/pm marker           (Text)             PM
                k        hour in day (1~24)     (Number)           24
                K        hour in am/pm (0~11)   (Number)           0
                z        time zone              (Text)             Pacific Standard Time
                Z        time zone (RFC 822)    (Number)           -0800
                v        time zone (generic)    (Text)             Pacific Time
                Q        quarter                (Text)             Q3
                &#39;        escape for text        (Delimiter)        &#39;Date=&#39;
                &#39;&#39;       single quote           (Literal)          &#39;o&#39;&#39;clock&#39; </p>
<h2 id='monitoring-and-bite'>Monitoring and BITE</h2>
<p>Status information of SLDS can be checked http://ipaddress:port/info and http://ipaddress:port/status</p>

<p>It is possible to check screenshot of current view on the screen(this will currently not show video area content): http://ipaddress:port/screenshot</p>
<h2 id='logging'>Logging</h2>
<p>Logging should be implemented by TPCM via checking <code>http://ipaddress:port/info</code> page</p>
<h1 id='errors'>Errors</h1>
<p>AmpronLED NextGen visualises errors and current status at http://ampronledIP:port/info</p>

<p>To check what is currently on screen requwst for screenshot: http://ipaddress:port/screenshot</p>
<h1 id='how-to-features'>How To (Features)</h1><h2 id='brightness-control'>Brightness control</h2><h3 id='it-is-possible-to-change-the-brightness-of-the-display-in-6-different-ways'>It is possible to change the brightness of the display in 6 different ways:</h3><h3 id='1-automatic-daylight'>1. Automatic daylight</h3>
<p>This is the default mode, brightness is changed between 50% and 100% automatically. Time of change is defined by sunset and sunrise with an accuracy of 2 weeks, example:
in the first half of May, the daytime starts later than in the second half of May and in the first half of June later than in the second half of May etc. Default sunset times are taken for local longitude and latitude.</p>
<h3 id='2-automatic-daylight-specific-location'>2. Automatic daylight, specific location</h3>
<p>With this mode, it is possible to define the sunrise and sunset times and also relevant brightness %, for each half months.
To use this feature, it is needed to add a specific brightness-schedule.json file to ampronled directory (with X permissions), if the file is present then it is used, if not then default schedule is used).</p>
<h3 id='3-manual-brightness-for-a-single-screen'>3. Manual brightness for a single screen</h3>
<p>To enable manual brightness setting feature, define the following parameter at <code>&quot;displayIP&quot;</code> level:</p>

<p><code>&quot;sensorBrightness&quot;: true</code>,</p>

<p>To use this feature send HTTP GET command to the ampronled software:</p>

<p><code>http://ampronledIP:port/brightness/VALUE?id=DISPLAY_ID</code></p>

<p>VALUE can be from 1 to 100</p>
<h3 id='4-advanced-automatic-brightness-management'>4. Advanced automatic brightness management</h3>
<p>It is possible to manipulate different types of data to manage the brightness of screens eg.open web RSS feeds, parsing XML, using MODBUS/TCP etc. This feature requires additional Ampron Monitoring Module hardware unit and Ampron Monitoring Software.</p>
<h2 id='configuration'>Configuration</h2><h3 id='description'>Description</h3>
<p>The main configuration is set in a <code>config.json</code> file. Other configuration items are defined in various files and are linked to the main file according to specific needs.</p>

<p><code>AFTER CHANGES TO THE CONFIGURATION, THE CONFIGURATION MUST BE RELOADED FOR CHANGES TO TAKE EFFECT</code></p>
<h2 id='define-text-colour'>Define text colour</h2>
<p>For <code>&quot;text&quot;</code> and &quot;static&quot; areas, it is possible to define font colour also with the GET request.</p>

<p><code>http://ampronledIP:port/mlds?id=DISPLAY_ID&amp;layout=LAYOUT_NAME&amp;AREA_NAME=HELLO&amp;fontColor[AREA_NAME]=0_255_255</code></p>

<p>where 0_255_255 is the colour of the text in RGB</p>
<h2 id='set-and-change-scroll-speed'>Set and change scroll-speed</h2>
<p>Define parameter:</p>

<p><code>&quot;scrollSpeed&quot;: &quot;VALUE&quot;,</code> VALUE - 0...8, 0-fastest and 8-slowest</p>

<p>if the parameter is not defined then default scroll speed is 4</p>
<h2 id='set-text-background-colour'>Set text background colour</h2>
<p>It is possible to define the background colour of <code>&quot;text&quot;</code> and <code>&quot;static&quot;</code> areas text.</p>

<p>To set the background colour of text, define the following parameter under the relevant area:</p>

<p><code>&quot;backgroundColor&quot;: &quot;0 255 255&quot;</code>, whereas <code>&quot;0 255 255&quot;</code> is the color of text background in RGB.</p>

<p>It is also possible to define an alpha channel for this feature, <code>&quot;backgroundColor&quot;: &quot;0 255 255 127&quot;</code>, whereas 127 is alpha channel value 0...127</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">JSON</a>
          </div>
      </div>
    </div>
  </body>
</html>
